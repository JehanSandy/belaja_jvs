<script>
    let Produk = [[`Apel`, 10_000, 5], [`anggur`, 15_000, 7], [`jeruk`, 20_000, 9]]
    let cart = []
    let totalHarga = 0

    // let list = `Daftar buah segar \n`
    //         for (let i = 0; i < Produk.length; i++) {
    //             list += `${i + 1}. ${Produk[i][0]}, Harga Rp.${Produk[i][1]}, Stok tersedia ${Produk[i][2]}\n`
    //         }
    //         alert(list)

    const DaftarBuah = () => {
        let list = `Daftar buah segar \n`
        Produk.forEach((item, indeks) => {
            list += `${indeks + 1}. buah ${item[0]}, harga ${item[1]}, stok ${item[2]} \n`

        })
        return list
        console.log(list)
    }

    // let keranjang = `Dartar keranjang anda \n`
    //     for (let i = 0; i < cart.length; i++) {
    //         keranjang += `${i - 1}. Rp. ${cart[i][1]} x ${cart[i][2]} = Rp. ${(cart[i][1] * cart[i][2]).toLocaleString()} \n`

    //         keranjang += `Total belanja anda Rp. ${totalHarga.toLocaleString()}`
    //     }

    const DaftarKeranjang = () => {
        let keranjang = `Daftar keranjang anda \n`
        cart.forEach((item, indeks) => {
            keranjang += `${indeks + 1}. Rp. ${item[1]} x ${item[2]} = Rp. ${(item[1] * item[2]).toLocaleString()}\n`

            keranjang += `total belanjan anda Rp.${totalHarga}`
        })
        return keranjang
    }

    while (true) {

        let Hal_awal = +prompt(`Selamat datang, selamat berbelanja
    1. Daftar Buah
    2. Tambah Buah
    3. menghapus Buah
    4. membeli Buah
    5. Exit`)
        if (Hal_awal == 1) {
            alert(DaftarBuah())

        } else if (Hal_awal == 2) {
            let newData = []
            let name
            while (true) {
                let namaIn = prompt(`Masukkan jenis buah!`)
                if (!namaIn) {
                    alert(`tolong masukkan inputan yg benar`)
                } else {
                    newData.push(namaIn)
                    console.log(namaIn)
                    name = namaIn
                    break
                }
            }
            while (true) {
                let harga = +prompt(`Masukkan harga buah!`)
                if (!harga) {
                    alert(`tolong masukkan inputan yg benar`)
                } else {
                    console.log(harga)
                    newData.push(harga)
                    break
                }
            }
            while (true) {
                let qty = +prompt(`Masukkan jumlah buah!`)
                if (!qty) {
                    alert(`tolong masukkan inputan yg benar`)
                } else {
                    newData.push(qty)
                    break
                }
            }
            Produk.push(newData)
            console.log(newData)
            alert(`Data buah ${name} sudah di masukkan ke database`)

        }
        else if (Hal_awal == 3) {

            alert(DaftarBuah() + ` Buah mana yang ingin di hapus`)

            let index = +prompt(DaftarBuah() + `Buah mana yg ingin di hapus`)
            Produk.splice(index - 1, 1)

            alert(`Data buah ke ${index} sudah di hapus dari keranjang`)

        } else if (Hal_awal == 4) {
            while (true) {
                let index = +prompt(DaftarBuah() + ` Buah mana yang ingin di dibeli`)
                console.log(index)
                alert(`buah ${Produk[index - 1][0]} sudah di tambahkan ke keranjang`)

                while (true) {
                    let qty = +prompt(`Berapa ${Produk[index - 1][0]} yg ingin dibeli? * Stok = ${Produk[index - 1][2]}`)

                    if (qty > Produk[index - 1][2]) {
                        alert(`Quantity melebihi stok, mohon input ulang sesuai stok yg ada`)
                    } else if (qty <= Produk[index - 1][2]) {
                        cart.push([Produk[index - 1][0], Produk[index - 1][1], qty])

                        totalHarga += Produk[index - 1][1] * qty

                        alert(`Buah ${Produk[index - 1][0]} sebanyak ${qty} Sudah di masukkan keranjang`)
                        break
                    }
                }
                let konfirmasi = confirm(`Apakah anda mau membeli buah yg lain?`)
                if (!konfirmasi) break

            }
            while (true) {
                alert(DaftarKeranjang())
                // let keranjang = `Dartar keranjang anda \n`
                // for (let i = 0; i < cart.length; i++) {
                //     keranjang += `${i - 1}. Rp. ${cart[i][1]} x ${cart[i][2]} = Rp. ${(cart[i][1] * cart[i][2]).toLocaleString()} \n`

                //     keranjang += `Total belanja anda Rp. ${totalHarga.toLocaleString()}`
                // }
                // console.log(keranjang)

                // cart.forEach((item, indeks) => {
                //     keranjang += `${indeks + 1}. Rp. ${item[1]} x ${item[2]} = Rp. ${(item[1] * item[2]).toLocaleString()} \n`


                // })
                // keranjang += `total belanjan anda Rp.${totalHarga}`
                // alert(keranjang)

                // DaftarKeranjang()
                // console.log(DaftarKeranjang())


                let nominal = +prompt(`  Total belanja anda Rp. ${totalHarga.toLocaleString()}, Toling isi sesuai jumlah belanja`)
                if (nominal < totalHarga) {
                    alert(`Mohon maaf uang anda kurang, tolong masukkan sesuai tital belanja`)
                } else if (nominal > totalHarga) {
                    alert(`Terima kasih, kembalian anda Rp.${(nominal - totalHarga).toLocaleString()}`)
                    break
                } else if (nominal == totalHarga) {
                    alert(`Terimakasih selamat berbelanja kembali`)
                    break
                }
            }
            // let konfirmasi = confirm(`Apakah anda ingin menambahkan buah lagi?`)
            // if (konfirmasi == false) break // format lain if (!konfirmasi)
        } else if (Hal_awal == 5) {
            alert(5)
            break
        }
        else {
            alert(`maaf pilihan anda tidak tersedia`)
        }
    }
</script>